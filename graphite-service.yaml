apiVersion: v1
kind: Service
metadata:
  name: graphite
spec:
  type: LoadBalancer
  ports:
    - port: 80
      name: graphite-ui
      protocol: TCP
      targetPort: nginx
    - port: 2003
      name: cbn-rcv-text
      protocol: TCP
      targetPort: cbn-rcv-text
    - port: 2004
      name: cbn-rcv-pickle
      protocol: TCP
      targetPort: cbn-rcv-pickle
    - port: 2023
      name: cbn-agg-text
      protocol: TCP
      targetPort: cbn-agg-text
    - port: 2024
      name: cbn-agg-pickle
      protocol: TCP
      targetPort: cbn-agg-pickle
    - port: 8126
      name: statsd-admin
      protocol: TCP
      targetPort: statsd-admin
    - port: 8080
      name: gunicorn
      protocol: TCP
      targetPort: gunicorn
  selector:
    app.kubernetes.io/name: graphite
---
apiVersion: v1
kind: Service
metadata:
  name: graphite-udp
spec:
  type: LoadBalancer
  ports:
    - port: 8125
      name: statsd
      protocol: UDP
      port: 8125
      targetPort: statsd
